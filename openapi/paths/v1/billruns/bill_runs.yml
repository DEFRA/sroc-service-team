get:
  operationId: ListBillRuns
  description: "Request to view a list of bill runs for the specified regime. List may include both billed and unbilled bill runs. Response contains summary stats about each bill run. Transaction level info is not included."
  tags:
    - billrun
  parameters:
    - $ref: '../../../schema/parameters.yml#/regime'
    - $ref: '../../../schema/parameters.yml#/billrunNumber'
    - $ref: '../../../schema/parameters.yml#/billrunStatus'
    - $ref: '../../../schema/parameters.yml#/page'
    - $ref: '../../../schema/parameters.yml#/perPage'
    - $ref: '../../../schema/parameters.yml#/region'
    - $ref: '../../../schema/parameters.yml#/sort'
    - $ref: '../../../schema/parameters.yml#/sortDir'
    - $ref: '../../../schema/parameters.yml#/transactionFileReference'
  responses:
    '200':
      description: "Success"
      content:
        application/json:
          schema:
            type: object
            properties:
              pagination:
                $ref: '../../../schema/schemas.yml#/pagination'
              data:
                type: object
                properties:
                  billRuns:
                    type: array
                    items:
                      $ref: '../../../schema/schemas.yml#/billrunSummary'
          example:
            pagination:
              page: 1
              perPage: 50
              pageCount: 1
              recordCount: 2
            data:
              billRuns:
                - id: 'adb3d105-43ae-4cdd-9421-d18b1d32e484'
                  region: 'A'
                  billRunNumber: 10002
                  fileId: 50001
                  transactionFileReference: 'nalai50001.dat'
                  transactionFileDate: null
                  status: 'billed'
                  approvedForBilling: false
                  preSroc: true
                  creditCount: 8
                  creditValue: -3928
                  invoiceCount: 48
                  invoiceValue: 1017868
                  creditLineCount: 8
                  creditLineValue: -3928
                  debitLineCount: 58
                  debitLineValue: 1017868
                  zeroValueLineCount: 0
                  netTotal: 1013940
                - id: 'd22ee1ab-d8d4-4e62-97b3-a64489c31c04'
                  region: 'T'
                  billRunNumber: 10002
                  fileId: 50002
                  transactionFileReference: 'nalti50002.dat'
                  transactionFileDate: null
                  status: 'billed'
                  approvedForBilling: false
                  preSroc: true
                  creditCount: 0
                  creditValue: 0
                  invoiceCount: 1
                  invoiceValue: 656
                  creditLineCount: 0
                  creditLineValue: 0
                  debitLineCount: 1
                  debitLineValue: 656
                  zeroValueLineCount: 0
                  netTotal: 656

post:
  operationId: CreateBillRun
  description: "This endpoint triggers creation of a bill run record for a region. Bill run contains no transactions on creation."
  tags:
    - billrun
  parameters:
    - $ref: '../../../schema/parameters.yml#/regime'
  responses:
    '201':
      description: "Success"
      content:
        application/json:
          schema:
            $ref: '../../../schema/schemas.yml#/billrunPostResponse'
          example:
            billRun:
              id: '2bbbe459-966e-4026-b5d2-2f10867bdddd'
              billRunNumber: 10004
  requestBody:
    content:
      application/json:
        schema:
          $ref: '../../../schema/schemas.yml#/billrunPost'
        example:
          region: 'A'
