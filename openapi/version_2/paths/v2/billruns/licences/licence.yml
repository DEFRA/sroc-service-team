get:
  operationId: ViewBillRunLicence
  description: "Request to view details of an licence. As we have a licence entity we want to drive all interactions using its ID. We would also prefer to structure the schema as `licence -> transactions` as this matches our structure in the database. However, the actual detail provided below is just to provide a rough example."
  tags:
    - suggested
  parameters:
    - $ref: '../../../../../schema/parameters.yml#/regime'
    - $ref: '../../../../../schema/parameters.yml#/billrunId'
    - $ref: '../../../../../schema/parameters.yml#/licenceId'
  responses:
    '200':
      description: "Success"
      content:
        application/json:
          example:
            licence:
              id: 'fd88e6c5-8da8-4e4f-b22f-c66554cd5bf3'
              billRunId: 'fd2ab097-3097-42bd-849e-046aa250a0d0'
              invoiceId: '559943dd-8d08-4c95-9600-9c6c7d08d0d8'
              licenceNumber: 'FOOO/BARRR/306'
              creditLineCount: 0
              creditLineValue: 0
              debitLineCount: 2
              debitLineValue: 4186
              zeroValueLineCount: 1
              newLicenceCount: 3
              netTotal: 4186
              transactions:
                - id: 'fe36eccb-4d58-4cb0-8062-01f7c2b886c2'
                  region: 'A'
                  credit: false
                  chargeValue: 2093
                  minimumChargeAdjustment: false
                - id: '08a74e38-3652-44b9-8459-c364d3a3e524'
                  region: 'A'
                  credit: false
                  chargeValue: 2093
                  minimumChargeAdjustment: false
                - id: '9b1cc7c7-4b19-42cc-8d17-90f121edebbb'
                  region: 'A'
                  credit: false
                  chargeValue: 0
                  minimumChargeAdjustment: false

delete:
  operationId: DeleteBillRunLicence
  description: "Delete the specified licence and all linked transactions. As part of the deletion the linked invoice and bill run will also be updated."
  tags:
    - unavailable
  parameters:
    - $ref: '../../../../../schema/parameters.yml#/regime'
    - $ref: '../../../../../schema/parameters.yml#/billrunId'
    - $ref: '../../../../../schema/parameters.yml#/licenceId'
  responses:
    '204':
      description: "Success"
